(this["webpackJsonpeverybody-eats-app"]=this["webpackJsonpeverybody-eats-app"]||[]).push([[0],{109:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),s=a.n(c),r=a(33),o=a.n(r),i=(a(109),a(50)),l=a(35),d=a(10),j=a(15),u=a(134),b=function(e){var t=Object(c.useState)(e.location?e.location.pathname.slice(1):"home"),a=Object(j.a)(t,2),s=a[0],r=a[1],o="home",i="map",d="new",b={home:"/",map:"/map",new:"/new"},p=function(e,t){var a=t.name;return r(a)};return Object(n.jsx)("div",{className:"p-2",children:Object(n.jsxs)(u.a,{borderless:!0,className:"Navbar",children:[Object(n.jsx)(u.a.Item,{as:l.b,to:b.home,name:o,active:s===o,onClick:p,children:"Home"}),Object(n.jsx)(u.a.Item,{as:l.b,to:b.map,name:i,active:s===i,onClick:p,children:"Map"}),Object(n.jsx)(u.a.Item,{as:l.b,to:b.new,name:d,active:s===d,onClick:p,children:"New"})]})})},p=function(){return Object(n.jsx)("div",{})},O=a(93),m=a(52),h=a.n(m),f=a(80),x=(a(115),function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)({}),o=Object(j.a)(r,2),i=o[0],l=o[1],d=Object(c.useState)(null),u=Object(j.a)(d,2),b=u[0],p=u[1],m=Object(c.useState)([]),x=Object(j.a)(m,2),v=x[0],g=x[1],w=Object(c.useMemo)((function(){return{center:[-84.388,33.749],zoom:10,view:"Auto",authOptions:{authType:"subscriptionKey",subscriptionKey:"oJw5kVebBOggGf15Sn_CLR3jIN7xQrQulnRC7567uVc"}}}),[]),y=new window.atlas.service.SubscriptionKeyCredential(w.authOptions.subscriptionKey),S=window.atlas.service.MapsURL.newPipeline(y),N=Object(c.useMemo)((function(){return new window.atlas.service.SearchURL(S)}),[S]);return Object(c.useEffect)((function(){(function(){var e=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/garden-get");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,s(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),s({Bayside:{NAME:"Bayside",ADDRESS:"2949 Bell Blvd. Bayside, NY 11360",CONTACT_INFO:"test@test.com",DESCRIPTION:"Lovely site with great greens",IMAGE_URL:"https://www.gardeningknowhow.com/wp-content/uploads/2013/06/community-garden.jpg"}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(c.useEffect)((function(){(function(){var e=Object(f.a)(h.a.mark((function e(){var t,n,c,s,r,o,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i,n=v,e.t0=h.a.keys(a);case 3:if((e.t1=e.t0()).done){e.next=21;break}return c=e.t1.value,s=a[c],r=s.ADDRESS,e.prev=7,e.next=10,N.searchAddress(window.atlas.service.Aborter.timeout(1e4),r,{limit:1});case 10:o=e.sent,d=o.geojson.getFeatures(),n.push(d),d.features&&(t[d.features[0].geometry.coordinates]=c),e.next=19;break;case 16:e.prev=16,e.t2=e.catch(7),console.log(e.t2);case 19:e.next=3;break;case 21:l(t),g(n);case 23:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(){return e.apply(this,arguments)}})()()}),[a,N,i,l,v,g]),Object(c.useEffect)((function(){!function(){var e=new window.atlas.Map("map",{center:w.center,zoom:w.zoom,view:w.view,authOptions:w.authOptions}),t=new window.atlas.source.DataSource,n=new window.atlas.layer.SymbolLayer(t,null,{iconOptions:{image:"pin-round-darkblue",anchor:"center",allowOverlap:!0},textOptions:{anchor:"top"}}),c=new window.atlas.Popup;e.events.add("ready",(function(){e.sources.add(t),e.layers.add(n);var s,r=Object(O.a)(v);try{for(r.s();!(s=r.n()).done;){var o=s.value;t.add(o)}}catch(l){r.e(l)}finally{r.f()}e.events.add("click",n,(function(t){var n,s;t.shapes&&t.shapes.length>0&&(s=t.shapes[0].data.geometry.coordinates,(n='<div class="azurePopup">\n                                        <div>'.concat(i[s],"</div>\n                                   </div>"))&&s&&(c.setOptions({content:n,position:s}),c.open(e),p(a[i[s]])))}))}))}()}),[v,i,a,p,w]),Object(n.jsxs)("div",{className:"mapPage",children:[Object(n.jsx)("div",{id:"map"}),Object(n.jsx)("div",{className:"gardenInfo",children:b?Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-4",children:[Object(n.jsx)("h4",{children:"Garden Name"}),Object(n.jsx)("p",{children:b.NAME}),Object(n.jsx)("h4",{children:"Garden Address"}),Object(n.jsx)("p",{children:b.ADDRESS}),Object(n.jsx)("h4",{children:"Description"}),Object(n.jsx)("p",{children:b.DESCRIPTION.replaceAll("%0A","\n")}),Object(n.jsx)("p",{children:Object(n.jsxs)("strong",{children:["Please contact ",b.EMAIL," for more information"]})})]}),Object(n.jsx)("div",{className:"col-8 imageCol",children:b.IMAGE_URL?Object(n.jsx)("img",{src:b.IMAGE_URL,alt:"Community garden"}):""})]}):""})]})}),v=a(135),g=(a(116),function(e){var t=Object(c.useState)(""),a=Object(j.a)(t,2),s=a[0],r=a[1],o=Object(c.useState)(""),i=Object(j.a)(o,2),l=i[0],d=i[1],u=Object(c.useState)(""),b=Object(j.a)(u,2),p=b[0],O=b[1],m=Object(c.useState)(""),h=Object(j.a)(m,2),f=h[0],x=h[1],g=Object(c.useState)(""),w=Object(j.a)(g,2),y=w[0],S=w[1],N=Object(c.useState)(""),A=Object(j.a)(N,2),C=A[0],F=A[1];return Object(n.jsxs)("div",{style:{margin:"10px"},children:[Object(n.jsxs)("form",{method:"POST",onSubmit:function(e){if(e.preventDefault(),""!==s&&""!==l&&""!==p&&""!==f&&""!==y){F("");var t=new FormData,a=l,n=p,c=f,r=y;t.append("path",s,"name: ".concat(a,"%# address: ").concat(n,"%# email: ").concat(c,"%# description: ").concat(r)),console.log("name: ".concat(a,"%# address: ").concat(n,"%# email: ").concat(c,"%# description: ").concat(r)),fetch("/api/garden-post",{method:"POST",body:t}).then((function(e){200===e.status&&console.log("SUCCESS")}))}else F("Please fill in all required fields.")},className:"newForm",children:[Object(n.jsx)(v.a,{type:"text",className:"gardenFormField",placeholder:"Garden Name",name:"name",onChange:function(e){d(e.target.value.replaceAll("'","''").replaceAll("%#",""))}}),Object(n.jsx)(v.a,{type:"text",className:"gardenFormField",placeholder:"Garden Address",name:"address",onChange:function(e){O(e.target.value.replaceAll("'","''").replaceAll("%#",""))}}),Object(n.jsx)(v.a,{type:"text",className:"gardenFormField",placeholder:"Your Contact Info",name:"email",onChange:function(e){x(e.target.value.replaceAll("'","''").replaceAll("%#",""))}}),Object(n.jsx)("textarea",{className:"gardenFormField ui",placeholder:"Tell us about this garden!",rows:"3",name:"description",onChange:function(e){S(e.target.value.replaceAll("'","''").replaceAll("%#",""))}}),Object(n.jsx)(v.a,{type:"file",className:"gardenFormField",name:"path",id:"path",onChange:function(e){r(e.target.files[0])}}),Object(n.jsx)(v.a,{type:"submit",className:"gardenFormField"})]}),Object(n.jsx)("p",{children:C})]})}),w=function(){return Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{exact:!0,path:"/",render:function(e){return Object(n.jsx)(p,Object(i.a)({},e))}}),Object(n.jsx)(d.b,{exact:!0,path:"/map",render:function(e){return Object(n.jsx)(x,Object(i.a)({},e))}}),Object(n.jsx)(d.b,{exact:!0,path:"/new",render:function(e){return Object(n.jsx)(g,Object(i.a)({},e))}}),Object(n.jsx)(d.b,{path:"/",children:Object(n.jsx)(d.a,{to:"/"})})]})};a(119);var y=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(l.a,{children:[Object(n.jsx)(d.d,{children:Object(n.jsx)(d.b,{path:"/",render:function(e){return Object(n.jsx)(b,Object(i.a)({},e))}})}),Object(n.jsx)(w,{})]})})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,136)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};o.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),S()}},[[120,1,2]]]);
//# sourceMappingURL=main.f8cb786c.chunk.js.map